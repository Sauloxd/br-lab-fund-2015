;inicio do programa
0000 0018; programa inicia em 0018
0002 0006; índice de A (a ser usado para fins de codificação, não é o A, representa o "ponteiro")
0004 0008; índice de B (a ser usado para fins de codificação, não é o B,representa o "ponteiro")
;6 e 8 estão hardcoded por corresponderem a A e B. Depois, serão mudados para A e C, e para B e C. A, B e C são os números da lista.

;inicio da lista de números
0006 00FF ;A
0008 00FC ;B
000A 000A ;C
;fim da lista de números

;a1
000E 0000
;b1
0010 0000
;Constantes utilizadas para auto-modificação.
0012 0006 ;primeiro elemento da lista
;memoria para elemento seguinte
0014 0008 ;elemento seguinte
;2
0016 0002
 
;***************************************************************************************************
; ---> início do programa propriamente dito <--- ;
;inicializa a1 com endereço de A
0018 8012 ;acc <- *A
001A 900E ;a1 <- acc, salvo primeiro elemtno da lista
001C 8014 ;elemento seguiunte no acc
001E 9010 ;b1 <- acc
0020 9014 ;salvo no segundo elemento da lista
0022 A060 ;Chama menor(a1,b1)
0024 1040 ;se acc == 0, vai pra subrotina de troca
;atualiza b1 
0026 8014 ;end do segundo elemento da lista no acc
0028 4016 ;SOMA 2
002A 9014 ;atualiza o 2 elemtno da lista
002C 9010 ;atualiza b1
002E A060 ;chama menor(a1,b1)
0030 1044 ;se acc == 0, vai pra subrotina de troca
;atualiza a1
0032 8012 ;acc <- a1
0034 4016 ;soma 2
0036 900E ;devolve para primeiro el da lista
0038 A060 ;chama menor(a1,b1)
003A 1048 ;se acc == 0, vai pra subrotina de troca
003C C03C




0040 A100 ;subrotina de troca(a1,b1)
0042 0026 ;volta pra funcao

0044 A100 ;subrotina de troca(a1,b1)
0046 0032 ;volta pra funcao

0048 A100 ;subrotina de troca(a1,b1)
004A 003C ;volta pra funcao

0058 0000 ;TEMP B
005A 9000 ;instrucao de escrita
005C 8000 ;instrucao de leitura
005E 0000 ;TEMP A
;***************************************************************************************************
;início da subrotina de auto-modificação menor(a1,b1), eg a1 <- *a e b1 <- *b
0060 0000 ;armazena o endereço de volta
0062 800E ;carrega a1 no acumulador
0064 405C ;soma instrucao
0066 9068 ;escreve na memoria de baixo a instrução pra ler memoria
0068 0000 ;acc <- conteudo de a
006A 905E ;armazena temp <- a
006C 8010 ;carrega b1 no acumulador
006E 405C ;soma instrucao
0070 9072 ;escreve na memoria de baixo a instrução pra ler memoria
0072 0000 ;acc <- conteudo de b
0074 505E ;b - a
0076 207C ;se for menor que 0, JMP 007A
0078 3001 ;se a<b ou b=a, acc <- 1
007A 007E ;JMP fim
007C 3000 ;se a>b, acc <-0
007E B060 ;fim 

;final da subrotina de auto-modificação menor(a,b)
;***************************************************************************************************

;subrotina de troca(a1,b1)
0100 0000 ;armazena o endereço de volta
0102 800E ;carrega a1 no acumulador
0104 405C ;soma instrucao
0106 9108 ;escreve na memoria de baixo a instrução pra ler memoria
0108 0000 ;instrucao de acc <- conteudo de a
010A 905E ;armazena temp A <- a
010C 8010 ;carrega b1 no acumulador
010E 405C ;soma instrucao
0110 9112 ;escreve na memoria de baixo a instrução pra ler memoria
0112 0000 ;instrucao de acc <- conteudo de b
0114 9058 ;TEMP B <- acc 
0116 800E ;acc <- endereco de a
0118 405A ;instrucao de escrita
011A 9150 ;guarda instrucao em um temp de escrita
011C 8058 ;carrega acc <- TEMP B com o valor a ser trocado
011E A14E ;vai pra linha que executa a instrucao de escrita
0120 8010 ;carrega acc <- endereco b
0122 405A 
0124 9150 ;guarda instr em temp de escrita
0126 805E ;carrega acc <- TEMP A com o valor a ser trocado
0128 A14E ;
012A B100 ;FIM

;***************************************************************************************************

014E 0000
0150 0000 ;Instrucao de escrita
0152 B14E ;volta pra subrotina
